n4s=function(){function t(){a[location.pathname]={title:document.title,html:$("body").first().html()}}function n(n){n=n?n:i,t(),n.init_links&&$("a[href]").each(function(t,n){$(this).attr("href").match(/^#/)||$(this).attr("href").match(/#/)||$(n).on("click",function(t){r(this),this.blur(),t.preventDefault()})}),n.init_forms&&$("form").each(function(){$(this).on("submit",function(t){var n=t.target,e={};return $("input, select, textarea",n).each(function(){e[this.name]=$(this).val()}),n4s.loadHtml(n.action,{method:n.method,data:e}),!1})}),e()}var e=function(){},i={},a={},o=location.pathname,c=function(t,c){i=$.extend({cache:!1,run_scripts:!1,run_inline_scripts:!1,run_external_scripts:!1,container_query:"body",method:"get",data:{},init_links:!0,init_forms:!0},c),window.addEventListener("popstate",function(t){if(location.pathname!=o){var e=a[location.pathname];e&&(document.title=e.title,$("body").html(e.html),n()),o=location.pathname}}),"function"==typeof t&&(e=t),n(i)},r=function(t,e){e=$.extend({},i,e),$.ajax({url:t,cache:e.cache,method:e.method?e.method:"get",data:e.data?e.data:{},success:function(t){history.pushState({},"",this.url);var i=t.split(/(<title[^>]*>|<\/title>)/gi)[2],a=t.split(/(<body[^>]*>|<\/body>)/gi)[2];if(a){if("body"!=e.container_query.toLowerCase()){var o=[],c=document.createElement("DIV");c.innerHTML=a,$(e.container_query,c).each(function(t,n){o.push(n.innerHTML)}),a=o.join("")}e.run_scripts||(a=a.replace(/<script[^>]*>/gi," <!-- //removed script").replace(/<\/script>/gi," --> ")),$(e.container_query).html(a),document.title=i,n(e)}}})};return _this={init:c,loadHtml:r}}();