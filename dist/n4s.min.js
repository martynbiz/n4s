n4s=function(){function t(){a[location.pathname]={title:document.title,html:$("body").first().html()}}function i(i){i=i?i:e,t(),i.init_links&&$("a[href]").each(function(t,i){$(this).attr("href").match(/^#/)||$(this).attr("href").match(/#/)||$(i).on("click",function(t){r(this),this.blur(),t.preventDefault()})}),i.init_forms&&$("form").each(function(){$(this).on("submit",function(t){var i=t.target,n={};return $("input, select, textarea",i).each(function(){n[this.name]=$(this).val()}),n4s.loadHtml(i.action,{method:i.method,data:n}),!1})}),n()}var n=function(){},e={},a={},o=location.pathname,c=function(t,c){e=$.extend({cache:!1,run_scripts:!1,run_inline_scripts:!1,run_external_scripts:!1,method:"get",data:{},init_links:!0,init_forms:!0},c),window.addEventListener("popstate",function(t){if(location.pathname!=o){var n=a[location.pathname];n&&(document.title=n.title,$("body").html(n.html),i()),o=location.pathname}}),"function"==typeof t&&(n=t),i(e)},r=function(t,n){n=$.extend({},e,n),$.ajax({url:t,cache:n.cache,method:n.method?n.method:"get",data:n.data?n.data:{},success:function(t){history.pushState({},"",this.url);var e=t.split(/(<title[^>]*>|<\/title>)/gi)[2],a=t.split(/(<body[^>]*>|<\/body>)/gi)[2];a&&(n.run_scripts||(a=a.replace(/<script[^>]*>/gi," <!-- //removed script").replace(/<\/script>/gi," --> ")),$("body").html(a),document.title=e,i(n))}})};return _this={init:c,loadHtml:r}}();