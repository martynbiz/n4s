n4s=function(){function t(){o[location.pathname]={title:document.title,html:$("body").first().html()}}function i(i){i=i?i:e,t(),i.init_links&&$("a").each(function(t,i){$(i).on("click",function(t){c(this),this.blur(),t.preventDefault()})}),i.init_forms&&$("form").each(function(){$(this).on("submit",function(t){var i=t.target,n={};return $("input, select, textarea",i).each(function(){n[this.name]=$(this).val()}),n4s.loadHtml(i.action,{method:i.method,data:n}),!1})}),n()}var n=function(){},e={},o={},a=function(t,a){e=$.extend({cache:!1,run_scripts:!1,run_inline_scripts:!1,run_external_scripts:!1,method:"get",data:{},init_links:!0,init_forms:!0},a),window.addEventListener("popstate",function(t){var n=o[location.pathname];n&&(document.title=n.title,$("body").html(n.html),i())}),"function"==typeof t&&(n=t),i(e)},c=function(t,n){n=$.extend({},e,n),$.ajax({url:t,cache:n.cache,method:n.method?n.method:"get",data:n.data?n.data:{},success:function(t){history.pushState({},"",this.url);var e=t.split(/(<title[^>]*>|<\/title>)/gi)[2],o=t.split(/(<body[^>]*>|<\/body>)/gi)[2];o&&(n.run_scripts||(o=o.replace(/<script[^>]*>/gi," <!-- //removed script").replace(/<\/script>/gi," --> ")),$("body").html(o),document.title=e,i(n))}})};return _this={init:a,loadHtml:c}}();